# Monty eSim EShop Web

## **Introduction**

**Subscribe Open Source** is a modern web application built using the following technologies:

- **React** – A JavaScript library for building interactive user interfaces.
- **Vite** – A fast and lightweight build tool and development server that enhances React performance.
- **Material UI** – A React component library that provides a set of pre-styled and accessible UI components following Material Design principles.
- **Tailwind CSS** – A utility-first CSS framework used for fast and responsive custom styling.

---

## **Installment**

Before you begin, ensure you have the following software installed on your system:

- **Node.js 22.14.0** (Please include an option to install npm during the installation process if it is not already selected)
- **Git**
- **Code Editor** such as Visual Studio Code

---

## **Initialization**

1. Clone the repo:

```bash
   git clone https://github.com/montymobile1/montyesim-eshop-web
```

2.Navigate into the project directory:

```bash
    cd your-project-name
```

3. Install the required dependencies listed in the package.json file:

```bash
   npm install
```

4.Start the project locally:

```bash
    npm run dev
```

## **Env Variables**

Some variables require enhanced security and should be stored in a .env file.

Please ensure the following environment variables are defined in your .env file for the application to work correctly:

```bash
    VITE_SUPABASE_URL=your-supabase-url
    VITE_SUPABASE_KEY=your-supabase-key

    VITE_API_URL=your-api-url

    VITE_APP_API_KEY=your-firebase-api-key
    VITE_APP_AUTH_DOMAIN=your-firebase-auth-domain
    VITE_APP_PROJECT_ID=your-firebase-project-id
    VITE_APP_STORAGE_BUCKET=your-firebase-storage-bucket
    VITE_APP_MESSAGING_SENDER_ID=your-firebase-messaging-sender-id
    VITE_APP_APP_ID=your-firebase-app-id
    VITE_APP_MEASUREMENT_ID=your-firebase-measurement-id
    VITE_APP_VAPID_KEY=your-firebase-vapid-key
    VITE_APP_HOME_VISIBLE=true-or-false
    VITE_APP_PROJECT_TITLE=your-project-title
    VITE_ENVIRONMENT=development-or-production
    VITE_APP_TITLE=your-app-title
```

## **Logins**

The project supports **three types of login**:

### 1. **Temporary Login**

- Allows users limited access.
- Users can **only purchase a bundle**.
- Access to other features is restricted.

### 2. **Standard Login**

- Users enter their **email**.
- They receive a **One-Time Password (OTP)** via email to log in.

### 3. **Social Login**

- Users can log in using **Google** or **Facebook** accounts.

---

## **Social Logins Configuration**

To enable social login, configure the following platforms:

---

### **Firebase**

1. Go to **Authentication > Sign-in Methods**

- Enable **Google** and **Facebook**.
- For Facebook:
    - Enter your **App ID** and **App Secret**.
    - Copy the **callback URL** generated by Firebase.
    - Add this URL to your **Facebook App** under:
        - `Facebook Login > Valid OAuth Redirect URIs`

2. Go to **Project Settings > Authorized Domains**

- Add **all domains** where your app will be hosted (e.g., `localhost`, production domain).

---

### **Google Console**

1. Go to **APIs & Services > Credentials**

- Use the **OAuth 2.0 Client ID** generated automatically by Firebase.

2. Add the following under your OAuth Client ID:

- **Authorized JavaScript origins**:
  `https://your-domain.com`
- **Authorized Redirect URIs**:
  `https://your-project.firebaseapp.com/__/auth/handler`

- This **Client ID will be used in Supabase** configuration.

---

### **Supabase**

1. Go to **Authentication > Settings > External OAuth Providers**

#### Google Provider

- Add your **Google Client ID** from the Google Console.
- If using multiple IDs, separate them with commas.

#### Facebook Provider

- Enter your **Facebook App ID** and **Secret**.
- Copy the **callback URL** provided by Supabase.
- Add it to **Facebook App Settings > Valid OAuth Redirect URIs**.

2. Go to **Authentication > URL Configuration**

- Add all **allowed redirect URLs** for OAuth.
- This step is **critical for Facebook**, which uses `signInWithOAuth()` for redirection.

---

### **Facebook Developer Console**

1. Go to: [https://developers.facebook.com/](https://developers.facebook.com/)

2. Navigate to:

- **My Apps > Your App > Facebook Login > Settings**

3. In **Valid OAuth Redirect URIs**, add:

- The **Firebase redirect URL**
- The **Supabase redirect URL**

---

## **Notifications**

The project uses **Firebase Cloud Messaging (FCM)** for push notifications.

### Setup Steps:

1. Go to **Firebase > Project Settings > General**

- Create a new **Web App** (if not already created).
- Copy the generated **Firebase config** and place the values into your `.env` file.

2. Go to **Firebase > Project Settings > Cloud Messaging > Web Configuration**

- Generate a **Web Push Key Pair (VAPID keys)**.
- Add this VAPID key to your `.env` as:
  ```env
  VITE_APP_VAPID_KEY=your-key-here
  ```

---

## **Payment Integration**

**Stripe** is used to securely process card payments.

### Flow:

1. When a user selects a **bundle**, an **API call** is made to retrieve:

- The **Stripe Client Secret**
- The **Stripe Promise** (configuration)

2. These values are then used to render the **Stripe Payment Element**, allowing users to enter their payment details securely.
